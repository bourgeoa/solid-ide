<!DOCTYPE html><html><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width"><title>
    Solside - a simple IDE and file manager for Solid Data Stores
</title>
<!--
  libraries from remote CDN
      solid-auth-client,solid-file-client,mimer,vue,ace
  local files 
      solidHandler, solidSession, editor, solid-file-client
-->
<script src="https://cdn.jsdelivr.net/npm/solid-auth-client@2.3.0/dist-lib/solid-auth-client.bundle.js"></script>
<!-- <script src="https://cdn.jsdelivr.net/npm/solid-file-client@1.0.4/dist/window/solid-file-client.bundle.js"></script> -->
<script src="./dist/window/solid-file-client.bundle.js"></script>
<!-- <script src="https://cdn.jsdelivr.net/npm/mimer@1.0.0/dist/mimer.min.js"></script> --->
<script src="./dist/mimer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jszip@3.2.2/dist/jszip.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.1/ace.js"></script>
<script src="./solid-ide-solidHandler.js"></script>
<script src="./solid-ide-solidSession.js"></script>
<script src="./solid-ide-editor.js"></script>
<!--<script src="./solid-ide-zipHandler.js"></script>
<script src="./solid-ide-apiCache.js"></script> --->
<link rel="stylesheet" href="./assets/main.css">
<style>
#folderManager {
  display:none;
  min-width:600px;
  min-height:200px;
}

#folderManager button {
    margin-left:0.5em;
}
/*select {
    overflow:hidden;
}
*/
input.plain {
    width:auto;
}
.inputDisplay {
    display:none;
}
#newFile.inputDisplay {
    display:block;
}


</style>
</head>
<body>

<div id="app">

<div id="opt" class="topRow table" v-bind:class="fontSize"><span class="tr">
    <span class="td left">
        <input type="text" v-model="currentThing.url" v-on:change="view.refresh(currentThing.url)">
        <button v-on:click="view.refresh(currentThing.url)">go</button>
</span>
    <span class="td right">
    <button id="saveEdits" v-on:click="fileDisplay.saveEdits()">
        save edits
    </button>
    <button id="editDisabled">save edits</button>
    <button v-on:click="fileDisplay.togglePanes()">
        view
    </button>
    <button id="optionsButton" v-on:click="view.show('optionsManager')">
        options
    </button>
    <button id="helpButton" v-on:click="view.show('help')">help</button>
    </span>
</span></div><!-- opt -->

<div id="folderMenu" v-bind:class="fontSize">
    <button v-on:click="manageResource(folder)" class="docIcon" v-bind:class="canControl()">
    <img src="./assets/folder.png">
    </button>
<!-- --->
    <button v-on:click="get(getLink(folder, 'acl'))" class="docIcon" v-bind:class="canControlLink(folder, 'acl')">
        <img src="./assets/padlock-timbl.svg">
    </button>
    <button v-on:click="get(getLink(folder, 'meta'))" class="docIcon" v-bind:class="canControlLink(folder, 'meta')">
        <img src="./assets/document.png">
    </button>
<!-- --->
    <button class="fileName" v-on:click="get(folder)">
        <span id="currentFolder">{{decodeURIComponent(folder.name)}}</span>
    </button>

    <ul>
        <li v-for="subFolder in folder.folders">
            <button class="docIcon">
                <img src="./assets/folder.png" />
            </button>
<!--
						<button v-on:click="manageResource(subFolder)" class="docIcon" v-bind:class="canControl(subFolder)">
                <img src="./assets/folder.png" />
            </button>
				    <button v-on:click="get(getLink(subFolder, 'acl'))" class="docIcon" v-bind:class="canControlLink(subFolder, 'acl')">
			        <img src="./assets/padlock-timbl.svg">
				    </button>
				    <button v-on:click="get(getLink(subFolder, 'meta'))" class="docIcon" v-bind:class="canControlLink(subFolder, 'meta')">
			        <img src="./assets/document.png">
				    </button>
--->
            <button class="fileName" v-on:click="get(subFolder)">
                {{decodeURIComponent(subFolder.name)}}
            </button>
        </li>
    </ul>
    <hr>
    <ul>
        <li v-for="f in folder.files">
            <button v-on:click="manageResource(f)" class="docIcon" v-bind:class="canControl()"><img src="./assets/document.png"></button>
<!--            <button v-on:click="rm(f)" class="docIcon" v-bind:class="canControl()"
                <img src="./assets/document.png">
            </button> --->
	        <button v-on:click="get(getLink(f, 'acl'))" class="docIcon" v-bind:class="canControlLink(f, 'acl')">	            <img src="./assets/padlock-timbl.svg">
	        </button>
<!--             <button class="fileName" oncontextmenu="return false;" v-on:click.right.prevent="downloadItem(f)" v-on:click="get(f)" v-bind:title="decodeURIComponent(f.name)+' '+f.type">
                {{decodeURIComponent(f.name)}}
            </button>
-->
            <button class="fileName" v-on:click="get(f)" v-bind:title="decodeURIComponent(f.name)+' '+f.type">
                {{decodeURIComponent(f.name)}}
            </button>
        </li>
    </ul>
</div><!-- folderMenu -->

<div id="fileManager" class="formArea">
    <div class="cancel-icon">
        <button v-on:click="view.hide('fileManager')" 
           class="xIcon" title="Cancel"> X 
        </button>
    </div>
    <div>File : <em>{{decodeURI(file.url)}}</em></div>
  <select id="fileOptions" v-model="fileOptions" v-on:change="showFileOption()" size=9>
    <option value="downloadFile" selected>download file</option>
    <option value="copyFile">copy file</option>
    <option value="moveFile">move file</option>
    <option value="deleteFile">delete file</option>
    <option value="zipFile">zip file</option>
    <option value="unzipFile">unzip File</option>
    <option>----------------</option>
    <option value="createAcl">create file acl</option>
    <option value="deleteAcl">delete file acl</option>    
  </select>
<!--
  <p id="newName" class="right-justify inputDisplay">  
    <input id="newFileInput" v-model="newThing.name" 
	    placeholder=" (new file name with extension, without path)"
	    value="{{decodeURI(file.name)}}">
    <button v-on:click="doAction('newFile')">go</button>
  </p>
--->
<!--
  <p id="newUrl" class="right-justify inputDisplay">
		<div>
	    <label>new folder :</label>
	    <input v-model="newThing.parentFolder" placeholder=" full path (leave blank to copy/move within same folder)">
		</div>
		<div>
	    <label>new name :</label>
	    <input v-model="newThing.name" 
		    placeholder=" (new file name with extension, without path)"
		    value="{{decodeURI(file.name)}}">
	    <button class="copyFile" v-on:click="cp(file, 'copy')">go</button>
	    <button class="moveFile" v-on:click="cp(file, 'move')">go</button>
		</div>
  </p>
--->
	<div>
	  <span id="mergeOptionsFile" class="inputDisplay">
	    <div>merge options</div>
		  <select size=3>
			  <option value="mergeReplace" selected>source replace target</option>
			  <option value="mergeSource">source plus items found only in target</option>
			  <option value="mergeTarget">keep target, add items found only in source</option>
		  </select>
	  </span>
	  <span id="aclOptionsFile" class="inputDisplay">
	    <div>acl & meta links</div>
	  	<select size=2>
			  <option value="include" selected>includes links</option>
			  <option value="exclude">without links</option>
	  	</select>
		</span>
	</div>
<!--
linked file options
  copy/move linked files leaving owner unmodified
  copy/move linked files setting owner of target as owner of target
  copy/move linked files setting owner of source as owner of target
  don't copy/move linked files
-->
  </p>
  <p id="copyFile" class="right-justify inputDisplay">
    <label>new folder :</label>
    <input id="copyFileInput" v-model="newThing.parentFolder" placeholder=" full path (leave blank to copy/move within same folder)">
    <label>new name :</label>
    <input v-model="newThing.name" 
	    placeholder=" (new file name with extension, without path)"
	    value="{{decodeURI(file.name)}}">
  	<button v-on:click="cp(file, 'copy')">copy</button>
  </p>

  <p id="moveFile" class="right-justify inputDisplay">
<!--    <input id="moveFileInput" placeholder=" (new folder location, full path)"> --->
    <label>new folder :</label>
    <input id="moveFileInput" v-model="newThing.parentFolder" placeholder=" full path (leave blank to copy/move within same folder)">
    <label>new name :</label>
    <input v-model="newThing.name" 
	    placeholder=" (new file name with extension, without path)"
	    value="{{decodeURI(file.name)}}">
    <button v-on:click="cp(file, 'move')">move</button>
  </p>
<!--
  <p id="uploadToFolder" class="right-justify inputDisplay">
  <input type="file" id="uploadToFolderInput" name="uploadToFolderInput" multiple="multiple" size="100">
  <button v-on:click="doAction('uploadToFolder')">go</button>
  </p>
--->
  <p id="zipFile" class="right-justify inputDisplay">
  <button v-on:click="zip(file)">zip</button>
  </p>
  <p id="unzipFile" class="right-justify inputDisplay">
  <button v-on:click="unzip(file)">unzip</button>
  </p>
  <p id="downloadFile" class="right-justify inputDisplay">
	<button v-bind:href="file.url" v-on:click.prevent="downloadItem(file)">download</button>
	</p>
</div><!-- fileManager -->
    
<!-- old fileManager
    <button v-on:click="zip(file)">zip file</button>
    <button v-on:click="unzip(file)">unzip file</button>
    <button v-on:click="rm(file)">delete file</button>
	  <button v-bind:href="file.url" v-on:click.prevent="downloadItem(file)">download file</button>
<hr>
    <button v-on:click="addThing('fileAcl')" v-bind:class="canControlLink(file, 'acl')">add acl</button>
    <button v-on:click="rm(getLink(file, 'acl'))" v-bind:class="canControlLink(file, 'acl')">delete acl</button>
<!--
<button v-bind:href="file.url" v-on:click.prevent="downloadItem(file)"><em>{{decodeURI(file.name)}}</em></button>
	<a v-bind:href="file.url" v-text="decodeURIComponent(file.name)" v-on:click.prevent="downloadItem(file)" oncontextmenu="return false;" >{{decodeURI(file.name)}}</a> -->
<!--<hr>
    <div>
        <label>new folder :</label>
        <input v-model="newThing.parentFolder"
               placeholder=" full path (leave blank to copy/move within same folder)"
        />
    </div>
    <div>
        <label>new name :</label>
        <input v-model="newThing.name"
               placeholder=" name with extension, without path"
value="{{decodeURI(file.name)}}"
        />

    <p class="right-justify">
        <button v-on:click="cp(file, 'copy')">copy file</button>
        <button v-on:click="cp(file, 'move')">move file</button>

<div v-bind:class="displayControls('table')"><div class="tr center">
<span class="td">
    <div>withAcl</div>
    <select v-model="withAcl" v-on:change="setWithAcl()" size="2">
        <option>true</option>
        <option>false</option>
    </select>
</span>
<span class="td">
    <div>Merge mode</div>
    <select v-model="mergeMode" v-on:change="setMergeMode()" size="2">
        <option>replace</option>
        <option>keep_source</option>
        <option>keep_target</option>
    </select>
</span>
</div></div>

    </p>
    </div>
</div><!-- fileManager -->
<!--  end --->

<div id="folderManager" class="formArea">
  <div class="cancel-icon">
      <button v-on:click="view.hide('folderManager')" 
       class="xIcon" title="Cancel"> X </button>
  </div>
  <div>Folder : <em>{{decodeURI(folder.url)}}</em></div>
  <select id="folderOptions" v-model="folderOptions" v-on:change="showFolderOption()" size=10>
    <option value="newFile" selected>create new file</option>
    <option value="newFolder">create new folder</option>
    <option value="uploadToFolder">upload files</option>
    <option value="deleteFolder">delete folder</option>
    <option value="copyFolder">copy folder</option>
    <option value="moveFolder">move folder</option>
    <option value="zipFolder">zip folder</option>
    <option>----------------</option>
    <option value="createAcl">create folder acl</option>
    <option value="deleteAcl">delete folder acl</option>    
  </select>
  <p id="newFile" class="right-justify inputDisplay">  
    <input id="newFileInput" placeholder=" (new file name, without path)">
    <button v-on:click="doAction('newFile')">go</button>
  </p>
  <p id="newFolder" class="right-justify inputDisplay">
    <input id="newFolderInput" placeholder=" (new folder name, without path)">
    <button v-on:click="doAction('newFolder')">go</button>
  </p>
  <p id="mergeOptionsFolder" class="inputDisplay">
  <select size=3>
  <option value="mergeReplace" selected>source replace target</option>
  <option value="mergeSource">
    source plus items found only in target
  </option>
  <option value="mergeTarget">
    keep target, add items found only in source
  </option>
  </select>
  <p id="aclOptionsFolder" class="inputDisplay">
  <select size=2>
  <option value="include" selected>include acl and meta links</option>
  <option value="exclude">without links</option>
  </select>
<!--
linked file options
  copy/move linked files leaving owner unmodified
  copy/move linked files setting owner of target as owner of target
  copy/move linked files setting owner of source as owner of target
  don't copy/move linked files
-->
  </p>
  <p id="copyFolder" class="right-justify inputDisplay">
    <input id="copyFolderInput" placeholder=" (new folder location, full path)">
    <button v-on:click="doAction('copyFolder')">go</button>
  </p>
  <p id="moveFolder" class="right-justify inputDisplay">
    <input id="moveFolderInput" placeholder=" (new folder location, full path)">
    <button v-on:click="doAction('moveFolder')">go</button>
  </p>
  <p id="uploadToFolder" class="right-justify inputDisplay">
  <input type="file" id="uploadToFolderInput" name="uploadToFolderInput" multiple="multiple" size="100">
  <button v-on:click="doAction('uploadToFolder')">go</button>
  </p>
  <p id="zipFolder" class="right-justify inputDisplay">
  <button v-on:click="zip(folder)">zip</button>
  </p>

</div><!-- #folderManager -->
<!-- old folderManager
	<button v-on:click="zip(folder)">zip folder</button>
	<button v-on:click="rm(folder)">delete folder</button>
	<button v-on:click="addThing('folderAcl')" v-bind:class="canControlLink(folder, 'acl')">add acl</button>
	<button v-on:click="rm(getLink(folder, 'acl'))" v-bind:class="canControlLink(folder, 'acl')">delete acl</button>
  <hr>
	<div>
		<label>new name</label>
		<input v-model="newThing.name" placeholder=" (without path)">
	</div>
		<p class="right-justify">
	    <label>in this folder </label>
	    <button v-on:click="addThing('file')">create new file</button>
	    <button v-on:click="addThing('folder')">create new folder</button>
    </p>
    <hr>
		<div>
			<label>new folder</label>
	   <input v-model="newThing.folder" placeholder=" (with full path)">
		</div>
		<p class="right-justify">
			<button v-on:click="cp('folder', 'copy')">copy folder</button>
	    <button v-on:click="cp('folder', 'move')">move folder</button>
		</p>
		<div v-bind:class="displayControls('table')"><div class="tr center">
			<span class="td">
	    	<div>withAcl</div>
		    <select v-model="withAcl" v-on:change="setWithAcl()" size="2">
	        <option>true</option>
	        <option>false</option>
		    </select>
			</span>
			<span class="td">
		    <div>Agent mode</div>
			    <select v-model="agentMode" v-on:change="setAgentMode()" size="2">
		        <option>no_modify</option>
		        <option>to_source</option>
		        <option>to_target</option>
			    </select>
			</span>
			<span class="td">
		    <div>Merge mode</div>
		    <select v-model="mergeMode" v-on:change="setMergeMode()" size="2">
	        <option>replace</option>
	        <option>keep_source</option>
	        <option>keep_target</option>
		    </select>
			</span>
		</div>
	</div>

	<hr>
	<label>upload file(s) in this folder</label>
	<input type="file" id="upFile" name="upFile" multiple size="100">
	<button v-on:click="upload("upFile")">upload</button>
</div><!-- folderManager -->
--->
<div id="optionsManager" class="formArea">
    <div class="cancel-icon">
        <button v-on:click="view.hide('optionsManager')"
           class="xIcon" title="Cancel"> X 
        </button>
    </div>

<div class="table">
    <div class="tr">
        <span class="td">logged in as</span>
        <span class="td left">
            {{webId}}
            <button v-on:click="setLogState()">{{logState}}</button>
            <button id="profileButton" v-on:click="getProfile()">edit profile</button>
        </span>
    </div>
    <div class="tr">
        <span class="td">home URL</span>
        <span class="td"><input v-model="homeUrl">
        <button v-on:click="get(homeUrl)">go home</button>
        </span>
    </div>
</div><!-- table -->
<div class="table"><div class="tr center">
<span class="td">
    <div>Key Bindings</div>
    <select v-model="editKeys" v-on:change="setEditKeys()" size="2">
        <option>emacs</option>
        <option>vim</option>
    </select>
</span>
<span class="td">
    <div>Syntax Highlighting</div>
    <select v-model="editTheme" v-on:change="setEditTheme()" size="2">
        <option>light theme</option>
        <option>dark theme</option>
    </select>
</span>
<span v-bind:class="displayControls('td')">
    <div>Display Links</div>
    <select v-model="displayLinks" v-on:change="setDisplayLinks()" size="2">
        <option>exclude</option>
        <option>include</option>
<!--        <option>include_possible</option> --->
    </select>
</span>

</div></div>
<hr>
     <button v-on:click="storePrefs()">save preferences</button>
     <a type="button" target="_blank" href="mailto:dubzed@gmail.com">send feedback</a>

</div><!-- optionsManager -->

<div id="help" class="formArea"> <!-- help -->
  <div class="cancel-icon">
    <button v-on:click="view.hide('help')"
      class="xIcon" title="Cancel"> X 
    </button>
  </div>
	<ul>
    <li><span class="label">open a folder</span> : click on its name</li>
		<li><span class="label">
		view, edit, or cut and paste from a file</span> : click on its name</li>
		<li><span class="label">
		view any Solid URL</span> : enter the URL in the input bar</li>
		<li><span class="label">
		login, logout, go home, edit profile, set editor prefs</span> : options button</li>
		<li><span class="label">
		toggle viewing data only, editor only, split screen</span> : view button</li>
		<li><span class="label">
		save editing</span> : click on the save edits button</li>
		<li><span class="label">
		cancel editing</span> : open any other file or folder</li>
		<li><span class="label">
		create new file or folder</span> : click on the current folder's icon</li>
		<li><span class="label">
		copy,move,delete,download file</span> : click on the file's icon</li>
		<li><span class="label">
		copy,move,delete,upload into folder</span> : move into the folder, click on its icon</li>
		<hr>
		<li><span class="label">
		display and manage links</span> : options button</li>
		<li><span class="label">
		view, edit, or cut and paste from a link</span> : click on its link icon</li>
	</ul>
</div><!-- end help -->
</div><!-- app -->


<!--
   FILE DISPLAY & EDITOR & DATA-BROWSER
-->
<div id="fileDisplay" class="rightCol flex-item" v-bind:class="displayState">
    <iframe id="dataBrowser" v-bind:src="file.srcUrl">
    </iframe>
    <div id="editor" style="font-family: Monaco, monospace !important">
    </div>
</div><!-- fileDisplay -->

<script src="./solid-ide.js"></script>

</body>
</html>
